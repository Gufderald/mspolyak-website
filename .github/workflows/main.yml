name: Full remote 

on:
  workflow_dispatch:
      
jobs:
  stop_prev_cont:
    name: stop previous container
    runs-on: self-hosted
    steps:
      - name: container stop
        run: docker stop mspwebsite
        
      - name: image remove
        run: docker rmi mspwebsite
    
  build:
    name: image build
    runs-on: self-hosted
    steps:
      - name: checking for actual
        uses: actions/checkout@v2.4.0
        with:
          path: .
        
      - name: building
        run: docker build -t mspwebsite .
        
      - name: running
        run: docker run --name mspwebsite -rm -d -p 4000:80 mspwebsite

    
  


